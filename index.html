<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <link rel="canonical" href="undefined">
  <script type="text/javascript">
    var host = "tkqubo.github.io";
    if ((host == window.location.host) && (window.location.protocol != "https:")) {
      window.location.protocol = "https";
    }
  </script>
  
  <title>tkqubo&#39;s blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="tkqubo's blog">
<meta property="og:url" content="https://tkqubo.github.io/index.html">
<meta property="og:site_name" content="tkqubo's blog">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="tkqubo's blog">
<meta name="twitter:description">
<meta name="twitter:creator" content="@tkqubo">
  
    <link rel="alternative" href="/atom.xml" title="tkqubo&#39;s blog" type="application/atom+xml">
  
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/css/style.css">
  
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="overlay"></div>
  <div id="header-outer" class="outer">
    <div id="profile_img">
      <img id="circle_img" src="/images/me.jpg" />
    </div>
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">tkqubo&#39;s blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">you ain&#39;t hacked nothin&#39; yet</a>
        </h2>
      
    </div>
    <div id="header-menu">
      <nav id="main-nav">
        <ul>
        
          <li><a href="/"><i class="fa fa-home icon-setting"></i></a></li>
        
          <li><a href="/archives"><i class="fa fa-archive icon-setting"></i></a></li>
        
          <li><a href="/about"><i class="fa fa-user icon-setting"></i></a></li>
        
        
          <li><a href="/atom.xml"><i class="fa fa-rss %> icon-setting"></i></a></li>
        
        </ul>
      </nav>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-a-casual-trip-to-the-monad-through-scalaz" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/05/30/a-casual-trip-to-the-monad-through-scalaz/" class="article-date">
  <time datetime="2016-05-29T19:31:20.000Z" itemprop="datePublished">2016-05-30</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/30/a-casual-trip-to-the-monad-through-scalaz/">A casual trip to the Monad, through Scalaz</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>We had a <a href="http://reactive-programming-with-scala-and-akka.connpass.com/event/31710/" target="_blank" rel="external">meetup</a> reading 2nd chapter of <a href="http://www.amazon.com/gp/product/1783984341/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1783984341&linkCode=as2&tag=tkqubo-20&linkId=3DD3AV3FBDD6745N" target="_blank" rel="external">Reactive Programming with Scala and Akka</a><img src="https://ir-na.amazon-adsystem.com/e/ir?t=tkqubo-20&l=as2&o=1&a=1783984341" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;"> last Friday.</p>
<p><a href="http://www.amazon.com/gp/product/1783984341/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1783984341&linkCode=as2&tag=tkqubo-20&linkId=JASVNACQ5LY5DXPL" target="_blank" rel="external"><img border="0" src="https://ws-na.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=1783984341&Format=_SL110_&ID=AsinImage&MarketPlace=US&ServiceVersion=20070822&WS=1&tag=tkqubo-20"></a><img src="https://ir-na.amazon-adsystem.com/e/ir?t=tkqubo-20&l=as2&o=1&a=1783984341" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;"></p>
<p>The first half of this chapter explains what is functional programming in Scala.  And the latter, through one of the most popular Scala library called <a href="https://github.com/scalaz/scalaz" target="_blank" rel="external">Scalaz</a>, the important concepts in functional programming; Functors, Applicative Functors, and Monads.</p>
<p>In this blog post, I will explain about my shallow understanding of those three handsome guys.</p>
<p><em>Disclaimer: the below is not thorough nor correct definitions of those concepts at all.  It simply is a starting point for understanding them.</em></p>
<h2 id="Functors-Applicative-Functors-and-Monads-for-the-first-step"><a href="#Functors-Applicative-Functors-and-Monads-for-the-first-step" class="headerlink" title="Functors, Applicative Functors, and Monads, for the first step"></a>Functors, Applicative Functors, and Monads, for the first step</h2><p>If you don’t know very much about functors, applicative functional, and monads (like me as a Scala newbie), maybe a table below could help understand them.</p>
<table>
<thead>
<tr>
<th style="text-align:left">Who are you?</th>
<th style="text-align:left">does what, mainly</th>
<th style="text-align:left">in which method</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong><code>Functor</code></strong></td>
<td style="text-align:left"><em>map</em>s a value <code>A</code> in some <em>container <code>F</code></em></td>
<td style="text-align:left"><em><code>map[B](f: A =&gt; B): F[B]</code></em></td>
</tr>
<tr>
<td style="text-align:left"><strong><code>Applicative</code></strong></td>
<td style="text-align:left"><em>applies</em> a method <code>A =&gt; B</code> in some <em>container <code>F</code></em> <br>to a value <code>A</code> in another <em>container F</em></td>
<td style="text-align:left"><em><code>ap[A,B](f: =&gt; F[A =&gt; B]): F[B]</code></em></td>
</tr>
<tr>
<td style="text-align:left"><strong><code>Monad</code></strong></td>
<td style="text-align:left"><em>flatMap</em>s a value <code>A</code> in some <em>container <code>F</code></em></td>
<td style="text-align:left"><em><code>bind[A, B](f: A =&gt; F[B]): F[B]</code></em></td>
</tr>
</tbody>
</table>
<p>Here, the word <em>container</em> means kind of an abstraction of the way of holding value.  <code>Option</code>, <code>List</code> and <code>Future</code> are good examples of them in Scala language.</p>
<table>
<thead>
<tr>
<th style="text-align:left">type</th>
<th style="text-align:left">how it holds value</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>Option[T]</code></td>
<td style="text-align:left">holds a value of type <code>T</code> (<code>Some(value)</code>), or nothing (<code>None</code>)</td>
</tr>
<tr>
<td style="text-align:left"><code>List[T]</code></td>
<td style="text-align:left">holds multiple values of type <code>T</code>.<br> (that is, <em>homogeneous collection</em> of type <code>T</code>)</td>
</tr>
<tr>
<td style="text-align:left"><code>Future[T]</code></td>
<td style="text-align:left">holds some concurrent block that will eventually return<br>the value of type <code>T</code>, or <code>Throwable</code> as a failure result.</td>
</tr>
</tbody>
</table>
<p><em>NOTE: Strictly speaking, container should actually be called a <code>type class</code>.  See <a href="https://en.wikipedia.org/wiki/Type_class" target="_blank" rel="external">Wikipaedia</a> for further explanations.</em></p>
<p>And <em>Monad</em>s <code>flatMap</code> (or <code>bind</code>), this <em>flatten</em>s the nested container as a result of mapping.</p>
<p>Anyway for better understandings let’s check out their implemtation in Scalaz’s source code with some examples.</p>
<h3 id="Implementations-amp-Examples"><a href="#Implementations-amp-Examples" class="headerlink" title="Implementations &amp; Examples"></a>Implementations &amp; Examples</h3><ul>
<li>Functor</li>
</ul>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// From Scalaz, details omitted</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">Functor</span>[<span class="type">F</span>[_]] </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">map</span></span>[<span class="type">A</span>, <span class="type">B</span>](fa: <span class="type">F</span>[<span class="type">A</span>])(f: <span class="type">A</span> =&gt; <span class="type">B</span>): <span class="type">F</span>[<span class="type">B</span>]</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Functor</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">apply</span></span>[<span class="type">F</span>[_]](<span class="keyword">implicit</span> <span class="type">F</span>: <span class="type">Functor</span>[<span class="type">F</span>]): <span class="type">Functor</span>[<span class="type">F</span>] = <span class="type">F</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FunctorOps</span>[<span class="type">F</span>[_],<span class="title">A</span>](<span class="params">val self: <span class="type">F</span>[<span class="type">A</span>]</span>)(<span class="params">implicit val <span class="type">F</span>: <span class="type">Functor</span>[<span class="type">F</span>]</span>) </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">map</span></span>[<span class="type">B</span>](f: <span class="type">A</span> =&gt; <span class="type">B</span>): <span class="type">F</span>[<span class="type">B</span>] = <span class="type">F</span>.map(self)(f)</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">FunctorSyntax</span>[<span class="type">F</span>[_]] <span class="keyword">extends</span> <span class="title">InvariantFunctorSyntax</span>[<span class="type">F</span>] </span>&#123;</span><br><span class="line">  <span class="keyword">implicit</span> <span class="function"><span class="keyword">def</span> <span class="title">ToFunctorOps</span></span>[<span class="type">A</span>](v: <span class="type">F</span>[<span class="type">A</span>]): <span class="type">FunctorOps</span>[<span class="type">F</span>, <span class="type">A</span>] =</span><br><span class="line">    <span class="keyword">new</span> <span class="type">FunctorOps</span>[<span class="type">F</span>,<span class="type">A</span>](v)(<span class="type">FunctorSyntax</span>.<span class="keyword">this</span>.<span class="type">F</span>)</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">F</span></span>: <span class="type">Functor</span>[<span class="type">F</span>]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Examples</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> scalaz._, <span class="type">Scalaz</span>._</span><br><span class="line"></span><br><span class="line"><span class="type">Functor</span>[<span class="type">List</span>].map(<span class="number">1</span> to <span class="number">10</span>) &#123;_ + <span class="number">1</span>&#125;</span><br><span class="line"><span class="comment">// List(2, ..., 11)</span></span><br><span class="line"></span><br><span class="line"><span class="type">Functor</span>[<span class="type">Option</span>].map(<span class="type">Some</span>(<span class="number">10</span>)) &#123;_ + <span class="number">1</span>&#125;</span><br><span class="line"><span class="comment">// Some(11)</span></span><br></pre></td></tr></table></figure>
<ul>
<li>Applicative (Applicative extends Apply)</li>
</ul>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// From Scalaz, details omitted</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">Apply</span>[<span class="type">F</span>[_]] <span class="keyword">extends</span> <span class="title">Functor</span>[<span class="type">F</span>] </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">ap</span></span>[<span class="type">A</span>,<span class="type">B</span>](fa: =&gt; <span class="type">F</span>[<span class="type">A</span>])(f: =&gt; <span class="type">F</span>[<span class="type">A</span> =&gt; <span class="type">B</span>]): <span class="type">F</span>[<span class="type">B</span>]</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">Applicative</span>[<span class="type">F</span>[_]] <span class="keyword">extends</span> <span class="title">Apply</span>[<span class="type">F</span>] </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">point</span></span>[<span class="type">A</span>](a: =&gt; <span class="type">A</span>): <span class="type">F</span>[<span class="type">A</span>]</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">pure</span></span>[<span class="type">A</span>](a: =&gt; <span class="type">A</span>): <span class="type">F</span>[<span class="type">A</span>] = point(a)</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">map</span></span>[<span class="type">A</span>, <span class="type">B</span>](fa: <span class="type">F</span>[<span class="type">A</span>])(f: <span class="type">A</span> =&gt; <span class="type">B</span>): <span class="type">F</span>[<span class="type">B</span>] = ap(fa)(point(f))</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Applicative</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">apply</span></span>[<span class="type">F</span>[_]](<span class="keyword">implicit</span> <span class="type">F</span>: <span class="type">Applicative</span>[<span class="type">F</span>]): <span class="type">Applicative</span>[<span class="type">F</span>] = <span class="type">F</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ApplicativeOps</span>[<span class="type">F</span>[_],<span class="title">A</span>](<span class="params">val self: <span class="type">F</span>[<span class="type">A</span>]</span>)(<span class="params">implicit val <span class="type">F</span>: <span class="type">Applicative</span>[<span class="type">F</span>]</span>) </span>&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">ApplicativeSyntax</span>[<span class="type">F</span>[_]] <span class="keyword">extends</span> <span class="title">ApplySyntax</span>[<span class="type">F</span>] </span>&#123;</span><br><span class="line">  <span class="keyword">implicit</span> <span class="function"><span class="keyword">def</span> <span class="title">ToApplicativeOps</span></span>[<span class="type">A</span>](v: <span class="type">F</span>[<span class="type">A</span>]): <span class="type">ApplicativeOps</span>[<span class="type">F</span>, <span class="type">A</span>] =</span><br><span class="line">    <span class="keyword">new</span> <span class="type">ApplicativeOps</span>[<span class="type">F</span>,<span class="type">A</span>](v)(<span class="type">ApplicativeSyntax</span>.<span class="keyword">this</span>.<span class="type">F</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Examples</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> scalaz._, <span class="type">Scalaz</span>._</span><br><span class="line"></span><br><span class="line"><span class="type">List</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>) &lt;*&gt; <span class="type">List</span>(&#123;(_:<span class="type">Int</span>) * <span class="number">3</span>&#125;)</span><br><span class="line"><span class="comment">// List(3, 6, 12)</span></span><br><span class="line"></span><br><span class="line"><span class="type">List</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>) &lt;*&gt; &#123;(_:<span class="type">Int</span>) * <span class="number">3</span>&#125;.point[<span class="type">List</span>]</span><br><span class="line"><span class="comment">// List(3, 6, 12)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// when you want to apply functions at a time</span></span><br><span class="line"><span class="keyword">val</span> values = <span class="type">List</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>)</span><br><span class="line"><span class="keyword">val</span> funcs1 = <span class="type">List</span>(&#123;(_:<span class="type">Int</span>) * <span class="number">3</span>&#125;)</span><br><span class="line"><span class="keyword">val</span> funcs2 = <span class="type">List</span>(&#123;(_:<span class="type">Int</span>) + <span class="number">3</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// verbose!</span></span><br><span class="line"><span class="keyword">val</span> resultUsingFlatMap: <span class="type">List</span>[<span class="type">Int</span>] =</span><br><span class="line">    funcs1.flatMap &#123; func1 =&gt;</span><br><span class="line">      funcs2.flatMap &#123; func2 =&gt;</span><br><span class="line">        values.map &#123; value =&gt;</span><br><span class="line">          (func1 andThen func2)(value)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// concise!</span></span><br><span class="line"><span class="keyword">val</span> resultUsingFor: <span class="type">List</span>[<span class="type">Int</span>] =</span><br><span class="line">  <span class="keyword">for</span> &#123;</span><br><span class="line">    value &lt;- values</span><br><span class="line">    func1 &lt;- funcs1</span><br><span class="line">    func2 &lt;- funcs2</span><br><span class="line">  &#125; <span class="keyword">yield</span> (func1 andThen func2)(value)</span><br><span class="line"></span><br><span class="line"><span class="comment">// more concise!?</span></span><br><span class="line"><span class="comment">// &lt;*&gt; is an alias for ap</span></span><br><span class="line"><span class="keyword">val</span> resultUsingApplicative: <span class="type">List</span>[<span class="type">Int</span>] =</span><br><span class="line">  values &lt;*&gt; funcs1 &lt;*&gt; funcs2</span><br></pre></td></tr></table></figure>
<ul>
<li>Monad</li>
</ul>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// From Scalaz, details omitted</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">Bind</span>[<span class="type">F</span>[_]] <span class="keyword">extends</span> <span class="title">Apply</span>[<span class="type">F</span>] </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">bind</span></span>[<span class="type">A</span>, <span class="type">B</span>](fa: <span class="type">F</span>[<span class="type">A</span>])(f: <span class="type">A</span> =&gt; <span class="type">F</span>[<span class="type">B</span>]): <span class="type">F</span>[<span class="type">B</span>]</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">ap</span></span>[<span class="type">A</span>, <span class="type">B</span>](fa: =&gt; <span class="type">F</span>[<span class="type">A</span>])(f: =&gt; <span class="type">F</span>[<span class="type">A</span> =&gt; <span class="type">B</span>]): <span class="type">F</span>[<span class="type">B</span>]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">Monad</span>[<span class="type">F</span>[_]] <span class="keyword">extends</span> <span class="title">Applicative</span>[<span class="type">F</span>] <span class="keyword">with</span> <span class="title">Bind</span>[<span class="type">F</span>] </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">ap</span></span>[<span class="type">A</span>, <span class="type">B</span>](fa: =&gt; <span class="type">F</span>[<span class="type">A</span>])(f: =&gt; <span class="type">F</span>[<span class="type">A</span> =&gt; <span class="type">B</span>]): <span class="type">F</span>[<span class="type">B</span>]</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Monad</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">apply</span></span>[<span class="type">F</span>[_]](<span class="keyword">implicit</span> <span class="type">F</span>: <span class="type">Monad</span>[<span class="type">F</span>]): <span class="type">Monad</span>[<span class="type">F</span>] = <span class="type">F</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MonadOps</span>[<span class="type">F</span>[_],<span class="title">A</span>](<span class="params">val self: <span class="type">F</span>[<span class="type">A</span>]</span>)(<span class="params">implicit val <span class="type">F</span>: <span class="type">Monad</span>[<span class="type">F</span>]</span>) </span>&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">MonadSyntax</span>[<span class="type">F</span>[_]] <span class="keyword">extends</span> <span class="title">ApplicativeSyntax</span>[<span class="type">F</span>] <span class="keyword">with</span> <span class="title">BindSyntax</span>[<span class="type">F</span>] </span>&#123;</span><br><span class="line">  <span class="keyword">implicit</span> <span class="function"><span class="keyword">def</span> <span class="title">ToMonadOps</span></span>[<span class="type">A</span>](v: <span class="type">F</span>[<span class="type">A</span>]): <span class="type">MonadOps</span>[<span class="type">F</span>, <span class="type">A</span>] =</span><br><span class="line">    <span class="keyword">new</span> <span class="type">MonadOps</span>[<span class="type">F</span>,<span class="type">A</span>](v)(<span class="type">MonadSyntax</span>.<span class="keyword">this</span>.<span class="type">F</span>)</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">F</span></span>: <span class="type">Monad</span>[<span class="type">F</span>]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Examples</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> scalaz._, <span class="type">Scalaz</span>._</span><br><span class="line"></span><br><span class="line"><span class="keyword">val</span> value = <span class="string">"126"</span></span><br><span class="line"><span class="keyword">val</span> map = <span class="type">Map</span>(<span class="number">10</span> -&gt; <span class="string">"ten"</span>, <span class="number">42</span> -&gt; <span class="string">"the answer"</span>)</span><br><span class="line"><span class="keyword">val</span> toIntOption: <span class="type">String</span> =&gt; <span class="type">Option</span>[<span class="type">Int</span>] = value =&gt; <span class="keyword">try</span> &#123; value.toInt.some &#125; <span class="keyword">catch</span> &#123; <span class="keyword">case</span> e: <span class="type">NumberFormatException</span> =&gt; <span class="type">None</span> &#125;</span><br><span class="line"><span class="keyword">val</span> toDivBy3Option: <span class="type">Int</span> =&gt; <span class="type">Option</span>[<span class="type">Int</span>] = value =&gt; (value % <span class="number">3</span> == <span class="number">0</span>) ? (value / <span class="number">3</span>).some | <span class="type">None</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// verbose version</span></span><br><span class="line">toIntOption(value).flatMap &#123; intValue =&gt;</span><br><span class="line">  toDivBy3Option(intValue).flatMap &#123; divBy3Value =&gt;</span><br><span class="line">    map.get(divBy3Value)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// for comprehension</span></span><br><span class="line"><span class="keyword">for</span> &#123;</span><br><span class="line">  intValue &lt;- toIntOption(value)</span><br><span class="line">  divBy3Value &lt;- toDivBy3Option(intValue)</span><br><span class="line">  mappedValue &lt;- map.get(divBy3Value)</span><br><span class="line">&#125; <span class="keyword">yield</span> mappedValue</span><br><span class="line"></span><br><span class="line"><span class="comment">// with sexy operators</span></span><br><span class="line"><span class="comment">// &gt;&gt;= is an alias for bind</span></span><br><span class="line"><span class="type">Monad</span>[<span class="type">Option</span>].point(value) &gt;&gt;= toIntOption &gt;&gt;= toDivBy3Option &gt;&gt;= map.get</span><br></pre></td></tr></table></figure>
<p>But what are these <code>XxxOps</code> and <code>XxxSyntax</code>???  This is kind of what we call <strong>pimp my library</strong> pattern in Scala, to add methods on target class or trait without modifying it, using the power of <em>implicit conversion</em>.</p>
<p>Its basic structure in Scalaz can be simplified like this:</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Original</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">OriginalOps</span>(<span class="params">val self: <span class="type">Original</span></span>) </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">additionalMethod</span> </span>= ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">Syntax</span> </span>&#123;</span><br><span class="line">  <span class="keyword">implicit</span> <span class="function"><span class="keyword">def</span> <span class="title">ToOriginalOps</span></span>(original: <span class="type">Original</span>): <span class="type">OriginalOps</span> =</span><br><span class="line">    <span class="keyword">new</span> <span class="type">OriginalOps</span>(original)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Syntax</span> <span class="keyword">extends</span> <span class="title">Syntax</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// usage</span></span><br><span class="line"><span class="keyword">import</span> <span class="type">Syntax</span>._</span><br><span class="line"></span><br><span class="line"><span class="keyword">val</span> original = <span class="keyword">new</span> <span class="type">Original</span></span><br><span class="line">original.additionalMethod</span><br></pre></td></tr></table></figure>
<h2 id="By-the-way"><a href="#By-the-way" class="headerlink" title="By the way,"></a>By the way,</h2><p>Is there any easy good way to write some fancy operators like <code>&quot;η&quot;</code>, <code>&quot;⊛&quot;</code>, or <code>&quot;∘&quot;</code>, without simply copy-and-pasting them?   Once in a while I feel like to indulge in using them with a bit of fear about Gestaltzerfall…</p>
<h2 id="Other-helpful-resources"><a href="#Other-helpful-resources" class="headerlink" title="Other helpful resources"></a>Other helpful resources</h2><ul>
<li><a href="http://eed3si9n.com/learning-scalaz/scalaz-cheatsheet.html" target="_blank" rel="external">http://eed3si9n.com/learning-scalaz/scalaz-cheatsheet.html</a></li>
<li><a href="https://github.com/arosien/scalaz-cheatsheets" target="_blank" rel="external">https://github.com/arosien/scalaz-cheatsheets</a></li>
</ul>
<h2 id="For-those-who-want-to-dive-more-into-functional-programming…"><a href="#For-those-who-want-to-dive-more-into-functional-programming…" class="headerlink" title="For those who want to dive more into functional programming…"></a>For those who want to dive more into functional programming…</h2><p><a href="https://one-team.com/" target="_blank" rel="external">Oneteam Inc.</a> is hiring a Scala engineer for server-side development.  Please visit <a href="https://one-team.com/recruit/" target="_blank" rel="external">HERE</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://tkqubo.github.io/2016/05/30/a-casual-trip-to-the-monad-through-scalaz/" data-id="ciot3ms2n0000zjx9c4qu7b4a" class="article-share-link">Share</a>
      
        <a href="https://tkqubo.github.io/2016/05/30/a-casual-trip-to-the-monad-through-scalaz/#disqus_thread" class="article-comment-link">Comments</a>
      
      
    </footer>
  </div>
  
  <a href="https://tkqubo.github.io/2016/05/30/a-casual-trip-to-the-monad-through-scalaz/">
    <img src="https://ga-beacon.appspot.com/UA-72229702-1/2016/05/30/a-casual-trip-to-the-monad-through-scalaz/?pixel" />  </a>
</article>



  
    <article id="post-reactive-programming-with-scala-and-akka-chapter-1" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/05/12/reactive-programming-with-scala-and-akka-chapter-1/" class="article-date">
  <time datetime="2016-05-12T01:00:00.000Z" itemprop="datePublished">2016-05-12</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/12/reactive-programming-with-scala-and-akka-chapter-1/">Reading Reactive Programming with Scala and Akka - Chapter 1</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Last week I held a small reading club to read <a href="http://www.amazon.com/gp/product/1783984341/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1783984341&linkCode=as2&tag=tkqubo-20&linkId=3DD3AV3FBDD6745N" target="_blank" rel="external">Reactive Programming with Scala and Akka</a><img src="https://ir-na.amazon-adsystem.com/e/ir?t=tkqubo-20&l=as2&o=1&a=1783984341" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;">, written by Prasanna Kumar Sathyanarayanan and Suraj Atreya.</p>
<p><a href="http://www.amazon.com/gp/product/1783984341/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1783984341&linkCode=as2&tag=tkqubo-20&linkId=JASVNACQ5LY5DXPL" target="_blank" rel="external"><img border="0" src="https://ws-na.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=1783984341&Format=_SL110_&ID=AsinImage&MarketPlace=US&ServiceVersion=20070822&WS=1&tag=tkqubo-20"></a><img src="https://ir-na.amazon-adsystem.com/e/ir?t=tkqubo-20&l=as2&o=1&a=1783984341" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;"></p>
<p>The book contains a lot of exciting topics about Scala, Functional Programming, Reactive Programming, and Akka.  Thus highly recommended for anyone with Scala love.</p>
<p>This time we read chapter 1, “Introducing Reactive Programming”.  And the below is what we’ve learned from there.</p>
<img src="/2016/05/12/reactive-programming-with-scala-and-akka-chapter-1/me.jpg" alt="me.jpg" title="">
<h2 id="Contents"><a href="#Contents" class="headerlink" title="Contents"></a>Contents</h2><p>This chapter largely contains these three parts, briefing the concept of reactive programming.</p>
<ul>
<li>What is Reactive Programming?</li>
<li>Other stuffs around Reactive Programming</li>
<li>Actual use case of Reactive Programming</li>
</ul>
<h2 id="So-what-is-Reactive-Programming"><a href="#So-what-is-Reactive-Programming" class="headerlink" title="So what is Reactive Programming?"></a>So what is Reactive Programming?</h2><p>(Although this chapter is named <em>“Introducing Reactive Programming”</em>, it rather seems to be explaining about Reactive Systems, or, Reactive Architecute?)</p>
<p>Core ideas that support Reactive Programming are, according to the book:</p>
<ul>
<li>Responsive</li>
<li>Resilient / fault tolerant</li>
<li>Scalable</li>
<li>Message-driven</li>
</ul>
<p>The book illustrates these words one by one, among which I appreciated the explanation of the <em>resilience</em>, where the author express <em>a failure as a first-class event</em>.  This is more concrete and easy-to-understand rephrase of Akka’s “let it crash” philosophy.  Yes, we have to handle failures gracefully, instead of trying to kick out or suppress them, as if they were non-existent.</p>
<p>For those 4 RP pillars above, these materials would be of great help</p>
<ul>
<li><a href="http://www.reactivemanifesto.org/" target="_blank" rel="external">The Reactive Manifesto</a></li>
<li><a href="https://speakerdeck.com/stefanobaghino/the-reactive-manifesto" target="_blank" rel="external">The Reactive Manifesto by Stefano Baghino</a> </li>
</ul>
<p>From them, we could additionally learn the difference between <em>scalable</em> and <em>elastic</em>.</p>
<p><em>Scalability</em> itself, for example, can be achieved simply by engineer’s manually re-writing a config file and adding one new server to the load balancer.  But to achieve the <em>elasticity</em>, those configuration must be done dynamically and automatically.  (see <a href="http://www.reactivemanifesto.org/glossary#Elasticity" target="_blank" rel="external">“Elasticity” in Glossary</a> of the Reactive Manifesto)</p>
<p><style>.gutter { display: none; }</style><br><figure class="highlight bash"><figcaption><span>So something like this?</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">           +-                    +--------------+</span><br><span class="line">      Goal |              +----&gt; |Responsiveness| &lt;-----+</span><br><span class="line">           +-             |      +--------------+       |</span><br><span class="line">                          |             ^               |</span><br><span class="line">           +-       +-----+----+        |       +-------+-------+</span><br><span class="line">           |        |Elasticity| &lt;------------&gt; |  Resilience / |</span><br><span class="line">           |        +----------+        |       |Fault tolerance|</span><br><span class="line">           |              ^             |       +---------------+</span><br><span class="line">Principles |   +--------&gt; |             |               ^</span><br><span class="line">           |   |          |             |               |</span><br><span class="line">           |   |    +-----+-----+       |               |</span><br><span class="line">           |   |    |Scalability|       |               |</span><br><span class="line">           |   |    +-----------+       |               |</span><br><span class="line">           +-  |          ^             |               |</span><br><span class="line">               |          |             |               |</span><br><span class="line">           +-  | +--------+-------------+---------------+---------+</span><br><span class="line">    Method |   +-+     (Akka) Message−Driven architecture         |</span><br><span class="line">           +-    +------------------------------------------------+</span><br></pre></td></tr></table></figure></p>
<h2 id="Around-Reactive-Programming"><a href="#Around-Reactive-Programming" class="headerlink" title="Around Reactive Programming"></a>Around Reactive Programming</h2><p>Functional programming, asynchronous programming, data streams, microservices, and RESTful services…  Those terminologies are too much popular recently and I can hardly imagine a day without using those jargons in software engineers’ conversation.  But how are they related to Reactive Programming?</p>
<p>In this multicore processor era, asynchronous programming paradigm is vital for creating reactive systems since single-threaded programming model cannot fully utilize all the cores.  Side-effect-free (pure) functional programming can make asynchronous programming easier.</p>
<p>And from the software architecture perspective, when adhering to the principle of the Reactive Programming, the system can eventually form a microservice-like shape because microservice architecture too emphasize a system’s modularity, scalability, maintainability and resilience.  So in a sense, microservice architecture is sort of a realization of reactive architecture.  And RESTful interface can be very handy universal language for interaction between those modularized services.</p>
<h2 id="Use-cases"><a href="#Use-cases" class="headerlink" title="Use cases"></a>Use cases</h2><p>The book introduces two reactive applications:</p>
<ul>
<li>IoT</li>
<li>Tumblr’s architecture</li>
</ul>
<p>One of the participants made an interesting remark on IoT that IoT devices themselves can construct a dense population as an Internet-connecting entities like us human beings.  Think about that with the outrageous growth of the number of the Internet users described in the beginning of this chapter, the amount of data flowing back and forth on the Internet will no doubt continue to increase.  To tackle with this problem, Reactive Programming must play the most important role in software engineering.</p>
<h2 id="A-thought-on-reading-technical-book-in-foreign-language-in-a-reading-circle"><a href="#A-thought-on-reading-technical-book-in-foreign-language-in-a-reading-circle" class="headerlink" title="A thought on reading technical book in foreign language in a reading circle"></a>A thought on reading technical book in foreign language in a reading circle</h2><p>As a non-native English speaker, I always find difficulty reading through technical materials written in English to the end.  But when we have somebody to study with, we can help each other and learn from each other, including outside the scope of the book.</p>
<p>Thanks to this book, with catchy title and contents suitable for both beginners and intermediates of the Scala language, I felt that this very first time was successful.  I hope we can enjoy the following chapters, too.</p>
<h2 id="Others"><a href="#Others" class="headerlink" title="Others"></a>Others</h2><h3 id="For-those-interested-in-the-book"><a href="#For-those-interested-in-the-book" class="headerlink" title="For those interested in the book:"></a>For those interested in the book:</h3><p><a href="https://www.packtpub.com/" target="_blank" rel="external">PACKT publishing</a> is offering <a href="https://www.packtpub.com/books/subscription/packtlib" target="_blank" rel="external">a subscription plan</a>, where you can read any software books published by PACKT at a very reasonable price each month.  On top of that, yearly plan can include monthly tokens to <strong>freely</strong> download any one digital book!  I will strongly recommend applying for this plan.</p>
<p><a href="https://www.packtpub.com/packtlib" target="_blank" rel="external">https://www.packtpub.com/packtlib</a></p>
<h3 id="For-those-interested-in-software-development-with-Scala"><a href="#For-those-interested-in-software-development-with-Scala" class="headerlink" title="For those interested in software development with Scala:"></a>For those interested in software development with Scala:</h3><p><a href="https://one-team.com/" target="_blank" rel="external">Oneteam Inc.</a> is now hiring server-side engineer.  Please visit <a href="https://one-team.com/recruit/" target="_blank" rel="external">HERE</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://tkqubo.github.io/2016/05/12/reactive-programming-with-scala-and-akka-chapter-1/" data-id="ciot3ms2y0002zjx9zpo6wwjj" class="article-share-link">Share</a>
      
        <a href="https://tkqubo.github.io/2016/05/12/reactive-programming-with-scala-and-akka-chapter-1/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ReactiveProgramming/">ReactiveProgramming</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Scala/">Scala</a></li></ul>

    </footer>
  </div>
  
  <a href="https://tkqubo.github.io/2016/05/12/reactive-programming-with-scala-and-akka-chapter-1/">
    <img src="https://ga-beacon.appspot.com/UA-72229702-1/2016/05/12/reactive-programming-with-scala-and-akka-chapter-1/?pixel" />  </a>
</article>



  
    <article id="post-init" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/05/12/init/" class="article-date">
  <time datetime="2016-05-11T19:21:52.000Z" itemprop="datePublished">2016-05-12</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/12/init/">init</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Hello-Xxxxx"><a href="#Hello-Xxxxx" class="headerlink" title="Hello Xxxxx"></a>Hello Xxxxx</h2><p>This is the first post of my blog.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://tkqubo.github.io/2016/05/12/init/" data-id="ciot3ms300004zjx9zzc9ocx8" class="article-share-link">Share</a>
      
        <a href="https://tkqubo.github.io/2016/05/12/init/#disqus_thread" class="article-comment-link">Comments</a>
      
      
    </footer>
  </div>
  
  <a href="https://tkqubo.github.io/2016/05/12/init/">
    <img src="https://ga-beacon.appspot.com/UA-72229702-1/2016/05/12/init/?pixel" />  </a>
</article>



  
  
</section>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 tkqubo<br>
      <a href="https://github.com/ken8203/hexo-theme-alberta" target="_blank">Alberta</a> by <a href="http://jaychung.tw" target="_blank">jaychung</a>. Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>. Thank <a href="http://subtlepatterns.com/" target="_blank">Subtlepatterns</a>
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-72229702-1', 'auto');
        ga('send', 'pageview');
      </script>
    </div>
  </div>
</footer>

    </div>
    
    
<script>
  var disqus_shortname = 'tkqubo';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script src="//imsky.github.io/holder/holder.js"></script>

  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>
